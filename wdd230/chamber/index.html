<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, inital-scale=1.0">
        <title>Chamber of Commerce</title>
        <script type="text/javascript" src="scripts.js" defer></script>
        <script type="text/javascript" src="windchill.js" defer></script>
        <script type="text/javascript" src="weather.js" defer></script>
        <script type="text/javascript" src="banner.js" defer></script>
        <link rel="stylesheet" href="base.css"> 
        <link rel="stylesheet" href="medium.css"> 
        <link rel="stylesheet" href="large.css"> 
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@600&family=Red+Hat+Mono&display=swap" rel="stylesheet">

</head>
<header>
  
   
<script class="date">
  // select the elements to manipulate (output to)
const datefield = document.querySelector(".date");
const datefieldUK = document.querySelector("aside"); // for european/family history format with day first.

// derive the current date using a date object
const today = new Date();
const fulldate = new Intl.DateTimeFormat("en-US", { dateStyle: "full" }).format(
	today
);
const fulldateUK = new Intl.DateTimeFormat("en-UK", {
	dateStyle: "full"
}).format(today);
// long, medium, short options ... try them

datefield.innerHTML = `${fulldate}`;
datefieldUK.innerHTML = `${fulldateUK}`;


</script>

       
        <a href="index.html"><img class= "logo" src="https://raw.githubusercontent.com/eplingk/eplingk.github.io/main/wdd230/chamber/ifcoclogo.webp" alt="logo" width="200" height="200"></a>
        <nav>
            <div class="navbar">
              <div class="container nav-container">
                  <input class="checkbox" type="checkbox">
                  <div class="hamburger-lines">
                    <span class="line line1"></span>
                    <span class="line line2"></span>
                    <span class="line line3"></span>
                  </div>  
                <div class="logo">
                  <h1>Idaho Falls Chamber of Commerce</h1>
                </div>
                <div class="menu-items">
                  <ul>
                  <li><a href="index.html">Home</a></li>
                  <li><a href="discover.html">Discover</a></li>
                  <li><a href="join.html">Membership</a></li>
                  <li><a href="directory.html">Directory</a></li>
                  <li><a href="contact.html">Contact</a></li>
                  <li><a class="icon" href="https://www.facebook.com/"><img src="https://eplingk.github.io/wdd230/chamber/logo-facebookpng-32204.png" alt="facebooklogo" width="20" height="20"></a></li>
                  <li><a class="icon" href="https://twitter.com/"><img src="https://eplingk.github.io/wdd230/chamber/logo-twitter-png-5859.png" alt="twitterlogo" width="30" height="30"></a></li>
                    </ul>
                </div>
              </div>
            </div>
          </nav>

          <nav class="largeScreenNav">
            <ul>
                <li id="home" class="active"><a href="index.html">Home</a></li>
                <li class="active"><a href="discover.html">Discover</a></li>
                <li class="active"><a href="join.html">Membership</a></li>
                <li class="active"><a href="directory.html">Directory</a></li>
                <li class="active"><a href="contact.html">Contact</a></li>
                <li class="iconF"><a class="active" href="https://www.facebook.com/"><img src="https://eplingk.github.io/wdd230/chamber/logo-facebookpng-32204.png" alt="facebooklogo" width="20" height="20"></a></li>
                <li class="iconT"><a class="active" href="https://twitter.com/"><img src="https://eplingk.github.io/wdd230/chamber/logo-twitter-png-5859.png" alt="twitterlogo" width="30" height="30"></a></li>
            </ul>
            <h1>Idaho Falls Chamber of Commerce</h1>
          </nav>

        </header>
<body>
  <main>
  <div class="banner"></div>
    
     
     <div class="grid"> 

      <div class="callToAction">
        <h2><b>Welcome to Idaho Falls</b></h2>
        <picture>
       
              <img class="wImage" src="https://i.ytimg.com/vi/G9sNy2pnHrM/maxresdefault.jpg" alt="welcome" width="800" height="500" >
              </picture>
              <div class="Jbutton"><a href="join.html">Join the Commerce</a></div>
                  </div>
      <div class="event">
      <div class="box"><p>UP NEXT ON OUR CALENDAR:</p><br><p>Dec 20th: Secret Santa Business</p><br><p>Support a random local business, and another will support yours!</p></div>
      </div>
      <div class="weather">
        <p>Current temperature:<br> <span id="current-temp"></span> &deg;F</p>
        <figure>
          <img alt="icon" id="weather-icon" />
          <figcaption></figcaption>
        </figure>
        <p>wind-speed: <br>6 MPR<span id="wind-speed"></span></p><br>
        <p>wind-chill: <br>42&deg;F <span id="wind-chill"></span></p>


        <script>
          const APPID = "4d9f17ef42374d8bec405fcc33edb96a";

// select HTML elements in the document
const currentTemp = document.querySelector('#current-temp');
const weatherIcon = document.querySelector('#weather-icon');
const captionDesc = document.querySelector('figcaption');
const humidity = document.querySelector("#humidity");
const pressure = document.querySelector("#pressure");
const windSpeed = document.querySelector("#wind-speed");
const windChill = document.querySelector("#wind-chill");
const windDirection = document.querySelector("#wind-direction")

const url = "https://api.openweathermap.org/data/2.5/weather?zip=97060&appid=4d9f17ef42374d8bec405fcc33edb96a&units=imperial"

async function apiFetch() {
  try {
    const response = await fetch(url);
    if (response.ok) {
      const data = await response.json();
      displayResults(data);
    } else {
        throw Error(await response.text());
    }
  } catch (error) {
      console.log(error);
  }
}

function capitalize(str) {
  const arr = str.split(" ");
  for (let i = 0; i < arr.length; i++) {
    arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].slice(1);
  }
  const str2 = arr.join(" ");
  return str2;
}

function degToCompass(num) {
  // Get direction code from DEG provided by the API
  // - Divide the angle by 22.5 because 360deg/16 directions
  // - Add .5 so that when you truncate the value you can break the 'tie' between the change threshold
  // - Directly index into the array and print the value (mod 16)
  const arrayOfDirectionCodes = ["N", "NNE", "NE", "ENE", "E", "ESE", "SE", "SSE", "S", "SSW", "SW", "WSW", "W", "WNW", "NW", "NNW"];
  let val = Math.floor((num / 22.5) + 0.5);
  return arrayOfDirectionCodes[(val % 16)];
}

function convertMillibarsToInchesOfMercury(num) {
  return num * 0.030;
}

function getWindChill(temp, wind) {
  if (temp <= 50 && wind >= 3) {
    let chill = 35.74 + 0.6215 * temp - 35.75 * Math.pow(wind, 0.16) + 0.4275 * temp * Math.pow(wind, 0.16);
    return Math.round(chill);
  }
  else {
      return "N/A";
  }
}

function displayResults(weatherData) {
  currentTemp.innerHTML = `<strong>${weatherData.main.temp.toFixed(0)}</strong>`;

  const iconsrc = `https://openweathermap.org/img/w/${weatherData.weather[0].icon}.png`;
  const desc = weatherData.weather[0].description;

  weatherIcon.setAttribute('src', iconsrc);
  weatherIcon.setAttribute('alt', desc);
  captionDesc.textContent = capitalize(desc);
  humidity.textContent = weatherData.main.humidity;
  pressure.textContent = convertMillibarsToInchesOfMercury(weatherData.main.pressure).toFixed(1);
  windSpeed.textContent = weatherData.wind.speed.toFixed(0);
  windChill.textContent = getWindChill(weatherData.main.temp.toFixed(0), weatherData.wind.speed);
  windDirection.textContent = degToCompass(weatherData.wind.deg)
}

apiFetch();




        </script>
        
      
    </div>
    <div class="sLight">
      <div class="sLightOne">
        <h2>Spotlight</h2><br>
        <div>
              <a href="http://blackbeardiner.com/"><h3>Black Bear Diner</h3></a>
              <h4>Restaurant</h4>
              <h4>1610 E 17th Street Idaho Falls ID 83404</h4>
              <h4>Gold Membership</h4>
              <img src="https://cdn.statically.io/img/bbdimagecdn.blob.core.windows.net/storeimages/store-image-DEFAULT.jpg?DEF" alt="logo" width="90" height="90">


        </div>

      </div>
      <div class="sLightTwo">
        
        <div>
          <a href="http://www.coopernorman.com/"><h3>Cooper Norman</h3></a>
          <h4>Accountant</h4>
          <h4>1000 Riverwalk Dr Ste 100 Idaho Falls ID 83402</h4>
          <h4>Silver Membership</h4>
          <img src="https://cdn.corporatefinanceinstitute.com/assets/accounting.jpeg" alt="logo" width="90" height="90">


    </div>

      

      <div class="sLight3">
        <div class="sLightDiv">

          <div>
            <a href="http://www.danscollisionrepair.com/"><h3>Dan's Collision Repair</h3></a>
            <h4>Automobile Services</h4>
            <h4>501 W. 17th Street Idaho Falls ID 83402</h4>
            <h4>Silver Membership</h4>
            <img src="https://cdn-daboe.nitrocdn.com/LurOZFXabQPOFRMEeCPPeiiZlCiCkKLZ/assets/static/optimized/rev-4d1f038/wp-content/uploads/shutterstock_321111407-768x512.jpg" alt="logo" width="90" height="90">


      </div>
      </div>
    </div>

    </div>
  </div>
      <div class="join">
        <div class="Jbutton"><a href="join.html">JOIN US!</a></div></div>
      <div class="newsRelease"><h2>!!!NEWS!!!</h2><br>
      <p>See the latest on COVID-19: </p><a href="https://pandemicpatients.org/?gclid=Cj0KCQjwqc6aBhC4ARIsAN06NmPb9JDeGUE54NmqCGdHA5HPZjWSpX-1196SXGDNQpmmEMaMiadN-J0aAmLCEALw_wcB">Click Here</a></div>
      </div>
      
      
    
   
    </main>

        
      

            <footer class="footer">
                <img class= "footerlogo" src="https://raw.githubusercontent.com/eplingk/eplingk.github.io/main/wdd230/chamber/ifcoclogo.webp" alt="logo" width="40" height="40">
                <p>Contact us at: (208) 523-1010 <br>
                or ifcocemail@gmail.com</p>
                
                <p id="map"><a href = "https://www.google.com/maps/place/Idaho+Falls,+ID/@43.4926827,-112.1037469,12z/data=!3m1!4b1!4m5!3m4!1s0x5354594e739512b5:0x2311c9fc094c49c9!8m2!3d43.4926607!4d-112.0407584">Link to our map</a></p>
                    <div  id="lastModified">
                    <script>
                        if (Date.parse(document.lastModified) != 0)
                            document.write('<p><b>©2022 IF Chamber of Commerce | Katie Epling | WDD 230 Project |Weather info provided by: OpenWeather API| Last Modification: '
                                           + document.lastModified
                                           + '</i></small>');
                        </script>
                        </div>
            </footer>
    </body>
</html>